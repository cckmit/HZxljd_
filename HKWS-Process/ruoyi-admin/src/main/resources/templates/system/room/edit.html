<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" >
<head>
    <th:block th:include="include :: header('修改房屋信息')" />
    <th:block th:include="include :: select2-css" />
</head>
<body class="white-bg">
    <div class="wrapper wrapper-content animated fadeInRight ibox-content">
        <form class="form-horizontal m" id="form-room-edit" th:object="${xlRoom}">
            <input name="id" th:field="*{id}" type="hidden">
            <input id="deptId" th:field="*{deptId}" type="hidden">
            <input id="villageId" th:field="*{villageId}" type="hidden">
            <!--<div class="form-group">    -->
                <!--<label class="col-sm-3 control-label">所属网格：</label>-->
                <!--<div class="col-sm-8">-->
                    <!--<input name="deptName" th:field="*{deptName}" class="form-control" type="text">-->
                <!--</div>-->
            <!--</div>-->
            <!--<div class="form-group">    -->
                <!--<label class="col-sm-3 control-label">所属小区：</label>-->
                <!--<div class="col-sm-8">-->
                    <!--<input name="villageName" th:field="*{villageName}" class="form-control" type="text">-->
                <!--</div>-->
            <!--</div>-->
            <div class="form-group">
                <label class="col-sm-3 control-label">所属网格：</label>
                <div class="col-sm-8">
                    <select name="deptId" id="deptName" class="form-control m-b"></select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">选择小区：</label>
                <div class="col-sm-8">
                    <select name="villageId" id="villageName" class="form-control m-b"></select>
                </div>
            </div>
            <div class="form-group">    
                <label class="col-sm-3 control-label">所属楼幢：</label>
                <div class="col-sm-8">
                    <input name="building" th:field="*{building}" placeholder="如5幢" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">    
                <label class="col-sm-3 control-label">所属单元：</label>
                <div class="col-sm-8">
                    <input name="unit" th:field="*{unit}" placeholder="如3单元" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">    
                <label class="col-sm-3 control-label">所属房屋：</label>
                <div class="col-sm-8">
                    <input name="room" th:field="*{room}" placeholder="如307室" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group is-required">
                <label class="col-sm-3 control-label">详细地址：</label>
                <div class="col-sm-8">
                    <input name="address" th:field="*{address}" class="form-control" type="text" required>
                </div>
            </div>
            <!--<div class="form-group">    -->
                <!--<label class="col-sm-3 control-label">房屋类型：</label>-->
                <!--<div class="col-sm-8">-->
                    <!--<select id="roomType" name="roomType" class="form-control m-b">-->
                        <!--<option value="" th:selected="*{roomType == '' }">&#45;&#45;请选择房屋类型&#45;&#45;</option>-->
                        <!--<option value="商品房" th:selected="*{roomType == '商品房' }">商品房</option>-->
                        <!--<option value="自建房" th:selected="*{roomType == '自建房' }">自建房</option>-->
                    <!--</select>-->
                <!--</div>-->
            <!--</div>-->
            <div class="form-group">
                <label class="col-sm-3 control-label is-required">房屋类型：</label>
                <div class="col-sm-8">
                    <div class="radio-box" th:each="dict : ${@dict.getType('room_type')}">
                        <input type="radio" th:id="${'roomType_' + dict.dictCode}" name="roomType" th:value="${dict.dictValue}" th:field="*{roomType}" required>
                        <label th:for="${'roomType_' + dict.dictCode}" th:text="${dict.dictLabel}"></label>
                    </div>
                </div>
            </div>
            <div class="form-group">    
                <label class="col-sm-3 control-label">房屋编码：</label>
                <div class="col-sm-8">
                    <input name="roomCode" th:field="*{roomCode}" placeholder="如有,请填写房屋编码" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">    
                <label class="col-sm-3 control-label">所属村镇：</label>
                <div class="col-sm-8">
                    <input name="town" th:field="*{town}" placeholder="请填写所属村镇" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">户主姓名：</label>
                <div class="col-sm-8">
                    <input name="householder" th:field="*{householder}" placeholder="请填写户主姓名" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">经济类型：</label>
                <div class="col-sm-8">
                    <select name="economicType" class="form-control m-b" th:with="type=${@dict.getType('economic_type')}">
                        <option value="">--请选择经济类型--</option>
                        <option th:each="dict : ${type}" th:text="${dict.dictLabel}" th:value="${dict.dictValue}" th:field="*{economicType}"></option>
                    </select>
                </div>
            </div>
            <div class="form-group">    
                <label class="col-sm-3 control-label">建造时间：</label>
                <div class="col-sm-8">
                    <input name="buildTime" th:field="*{buildTime}" placeholder="请填写建造时间" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">    
                <label class="col-sm-3 control-label">建筑层数：</label>
                <div class="col-sm-8">
                    <input name="floors" th:field="*{floors}" placeholder="请填写建筑层数" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">    
                <label class="col-sm-3 control-label">建筑面积：</label>
                <div class="col-sm-8">
                    <input name="areas" th:field="*{areas}" placeholder="请填写建筑面积" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">    
                <label class="col-sm-3 control-label">占地面积：</label>
                <div class="col-sm-8">
                    <input name="floorSpace" th:field="*{floorSpace}" placeholder="请填写占地面积" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">房屋使用情况：</label>
                <div class="col-sm-8">
                    <div class="radio-box" th:each="dict : ${@dict.getType('use_type')}">
                        <input type="radio" th:id="${'useType_' + dict.dictCode}" name="useType" th:value="${dict.dictValue}" th:field="*{useType}">
                        <label th:for="${'useType_' + dict.dictCode}" th:text="${dict.dictLabel}"></label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">房屋周边情况：</label>
                <div class="col-sm-8">
                    <select name="around" class="form-control m-b" th:with="type=${@dict.getType('around')}">
                        <option value="">--请选择房屋周边情况--</option>
                        <option th:each="dict : ${type}" th:text="${dict.dictLabel}" th:value="${dict.dictValue}" th:field="*{around}"></option>
                    </select>
                </div>
            </div>
            <!--<div class="form-group">-->
                <!--<label class="col-sm-3 control-label">砌筑方式：</label>-->
                <!--<div class="col-sm-8">-->
                    <!--<label class="radio-box"> <input type="radio" th:field="*{buildType}" name="buildType" value="空斗" /> 空斗 </label>-->
                    <!--<label class="radio-box"> <input type="radio" th:field="*{buildType}" name="buildType" value="实砌" /> 实砌 </label>-->
                <!--</div>-->
            <!--</div>-->
            <div class="form-group">
                <label class="col-sm-3 control-label">砌筑方式：</label>
                <div class="col-sm-8">
                    <div class="radio-box" th:each="dict : ${@dict.getType('build_type')}">
                        <input type="radio" th:id="${'buildType_' + dict.dictCode}" name="buildType" th:value="${dict.dictValue}" th:field="*{buildType}">
                        <label th:for="${'buildType_' + dict.dictCode}" th:text="${dict.dictLabel}"></label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">构筑类型：</label>
                <div class="col-sm-8">
                    <select name="structureType" class="form-control m-b" th:with="type=${@dict.getType('structure_type')}">
                        <option value="">--请选择构筑类型--</option>
                        <option th:each="dict : ${type}" th:text="${dict.dictLabel}" th:value="${dict.dictValue}" th:field="*{structureType}"></option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">私自加层：</label>
                <div class="col-sm-8">
                    <div class="radio-box" th:each="dict : ${@dict.getType('adding')}">
                        <input type="radio" th:id="${'adding_' + dict.dictCode}" name="adding" th:value="${dict.dictValue}" th:field="*{adding}">
                        <label th:for="${'adding_' + dict.dictCode}" th:text="${dict.dictLabel}"></label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">地下室：</label>
                <div class="col-sm-8">
                    <div class="radio-box" th:each="dict : ${@dict.getType('cellar')}">
                        <input type="radio" th:id="${'cellar_' + dict.dictCode}" name="cellar" th:value="${dict.dictValue}" th:field="*{cellar}">
                        <label th:for="${'cellar_' + dict.dictCode}" th:text="${dict.dictLabel}"></label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">三无：</label>
                <div class="col-sm-8">
                    <div class="radio-box" th:each="dict : ${@dict.getType('three_no')}">
                        <input type="radio" th:id="${'threeNo_' + dict.dictCode}" name="threeNo" th:value="${dict.dictValue}" th:field="*{threeNo}">
                        <label th:for="${'threeNo_' + dict.dictCode}" th:text="${dict.dictLabel}"></label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">预制多孔板：</label>
                <div class="col-sm-8">
                    <div class="radio-box" th:each="dict : ${@dict.getType('board')}">
                        <input type="radio" th:id="${'board_' + dict.dictCode}" name="board" th:value="${dict.dictValue}" th:field="*{board}">
                        <label th:for="${'board_' + dict.dictCode}" th:text="${dict.dictLabel}"></label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">用地手续：</label>
                <div class="col-sm-8">
                    <div class="radio-box" th:each="dict : ${@dict.getType('procedures')}">
                        <input type="radio" th:id="${'procedures_' + dict.dictCode}" name="procedures" th:value="${dict.dictValue}" th:field="*{procedures}">
                        <label th:for="${'procedures_' + dict.dictCode}" th:text="${dict.dictLabel}"></label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">建设规划手册：</label>
                <div class="col-sm-8">
                    <div class="radio-box" th:each="dict : ${@dict.getType('plan_note')}">
                        <input type="radio" th:id="${'planNote_' + dict.dictCode}" name="planNote" th:value="${dict.dictValue}" th:field="*{planNote}">
                        <label th:for="${'planNote_' + dict.dictCode}" th:text="${dict.dictLabel}"></label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">产权证：</label>
                <div class="col-sm-8">
                    <div class="radio-box" th:each="dict : ${@dict.getType('certificate')}">
                        <input type="radio" th:id="${'certificate_' + dict.dictCode}" name="certificate" th:value="${dict.dictValue}" th:field="*{certificate}">
                        <label th:for="${'certificate_' + dict.dictCode}" th:text="${dict.dictLabel}"></label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">享受补助：</label>
                <div class="col-sm-8">
                    <div class="radio-box" th:each="dict : ${@dict.getType('assistance')}">
                        <input type="radio" th:id="${'assistance_' + dict.dictCode}" name="assistance" th:value="${dict.dictValue}" th:field="*{assistance}">
                        <label th:for="${'assistance_' + dict.dictCode}" th:text="${dict.dictLabel}"></label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">鉴定等级：</label>
                <div class="col-sm-8">
                    <select name="appraisal" class="form-control m-b" th:with="type=${@dict.getType('appraisal')}">
                        <option value="">--请选择鉴定等级--</option>
                        <option th:each="dict : ${type}" th:text="${dict.dictLabel}" th:value="${dict.dictValue}" th:field="*{appraisal}"></option>
                    </select>
                </div>
            </div>
            <div class="form-group">    
                <label class="col-sm-3 control-label">坐标经度：</label>
                <div class="col-sm-8">
                    <input name="gisx" th:field="*{gisx}" placeholder="请输入坐标经度" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">    
                <label class="col-sm-3 control-label">坐标纬度：</label>
                <div class="col-sm-8">
                    <input name="gisy" th:field="*{gisy}" placeholder="请输入坐标纬度" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">    
                <label class="col-sm-3 control-label">电话：</label>
                <div class="col-sm-8">
                    <input name="phone" th:field="*{phone}" placeholder="请填写电话" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">    
                <label class="col-sm-3 control-label">身份证号：</label>
                <div class="col-sm-8">
                    <input name="idcard" th:field="*{idcard}" placeholder="请填写身份证号" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">    
                <label class="col-sm-3 control-label">家庭人数：</label>
                <div class="col-sm-8">
                    <input name="peoples" th:field="*{peoples}" placeholder="请填写人数" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">是否改造：</label>
                <div class="col-sm-8">
                    <div class="radio-box" th:each="dict : ${@dict.getType('remould')}">
                        <input type="radio" th:id="${'remould_' + dict.dictCode}" name="remould" th:value="${dict.dictValue}" th:field="*{remould}">
                        <label th:for="${'remould_' + dict.dictCode}" th:text="${dict.dictLabel}"></label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">安全隐患初判：</label>
                <div class="col-sm-8">
                    <select name="danger" class="form-control m-b" th:with="type=${@dict.getType('danger')}">
                        <option value="">--请选择安全隐患初判类型--</option>
                        <option th:each="dict : ${type}" th:text="${dict.dictLabel}" th:value="${dict.dictValue}" th:field="*{danger}"></option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">是否抗震加固：</label>
                <div class="col-sm-8">
                    <div class="radio-box" th:each="dict : ${@dict.getType('reinforce')}">
                        <input type="radio" th:id="${'reinforce_' + dict.dictCode}" name="reinforce" th:value="${dict.dictValue}" th:field="*{reinforce}">
                        <label th:for="${'reinforce_' + dict.dictCode}" th:text="${dict.dictLabel}"></label>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">整治计划情况：</label>
                <div class="col-sm-8">
                    <select name="renovate" class="form-control m-b" th:with="type=${@dict.getType('renovate')}">
                        <option value="">--请选择整治计划情况--</option>
                        <option th:each="dict : ${type}" th:text="${dict.dictLabel}" th:value="${dict.dictValue}" th:field="*{renovate}"></option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">是否为山洪灾害隐患点：</label>
                <div class="col-sm-8">
                    <div class="radio-box" th:each="dict : ${@dict.getType('waterflood')}">
                        <input type="radio" th:id="${'waterflood_' + dict.dictCode}" name="waterflood" th:value="${dict.dictValue}" th:field="*{waterflood}">
                        <label th:for="${'waterflood_' + dict.dictCode}" th:text="${dict.dictLabel}"></label>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <th:block th:include="include :: footer" />
    <th:block th:include="include :: select2-js" />
    <script type="text/javascript">
        var prefix = ctx + "system/room";
        $("#form-room-edit").validate({
            focusCleanup: true
        });

        function submitHandler() {
            $("#deptId").remove();
            $("#villageId").remove();
            if ($.validate.form()) {
                $.operate.save(prefix + "/edit", $('#form-room-edit').serialize());
            }
        }

        $(function() {
            $.ajax({
                type:"GET",
                url: prefix + "/regionList",
                dataType:"json",
                success:function(data){
                    var t1 = $("#deptName").empty();
                    if (!$("#deptId").val() == ""){
                        for ( var i = 0; i < data.length; i++) {
                            if(data[i].regionId == $("#deptId").val()){
                                debugger
                                t1.append("<option value='"+data[i].regionId+"'selected>"+ data[i].regionName+"</option>");
                            }else {
                                t1.append("<option value='"+data[i].regionId+"'>"+ data[i].regionName+"</option>");
                            }
                        }
                    }else {
                        t1.append("<option value=''disabled selected hidden>"+"--请选择--"+"</option>");
                        for ( var i = 0; i < data.length; i++) {
                            t1.append("<option value='"+data[i].regionId+"'>"+ data[i].regionName+"</option>");
                        }
                    }
                },
                error:function(jqXHR){
                    alert("发生错误："+ jqXHR.status);
                }
            });
        })

        $(function() {
            $.ajax({
                type:"GET",
                url: ctx + "system/village/listForCar",
                dataType:"json",
                success:function(data){
                    var t2 = $("#villageName").empty();
                    if (!$("#villageId").val() == ""){
                        for ( var i = 0; i < data.length; i++) {
                            if(data[i].id == $("#villageId").val()){
                                t2.append("<option value='"+data[i].id+"'selected>"+ data[i].name+"</option>");
                            }else {
                                t2.append("<option value='"+data[i].id+"'>"+ data[i].name+"</option>");
                            }
                        }
                    }else {
                        t2.append("<option value=''disabled selected hidden>"+"--请选择--"+"</option>");
                        for ( var i = 0; i < data.length; i++) {
                            t2.append("<option value='"+data[i].id+"'>"+ data[i].name+"</option>");
                        }
                    }
                },
                error:function(jqXHR){
                    alert("发生错误："+ jqXHR.status);
                }
            });
        })
    </script>
</body>
</html>